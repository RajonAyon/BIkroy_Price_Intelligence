<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phone Price Checker - Bangladesh</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <!-- Chart.js CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster/dist/MarkerCluster.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster/dist/MarkerCluster.Default.css" />
    <script src="https://unpkg.com/leaflet.markercluster/dist/leaflet.markercluster.js"></script>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üì±</text></svg>">

</head>
<body>

    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
                color: white; padding: 20px; text-align: center; margin-bottom: 25px;
                border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.2);">
        <div style="font-size: 1.2em; margin-bottom: 8px;">
            üìä <strong>LIVE DEMO</strong> - Production-Grade Price Intelligence System
        </div>
        <div style="font-size: 0.95em; opacity: 0.95;">
            Currently analyzing <strong>10,000+ listings</strong> from Bikroy.com | 
            Model trained on real market data | 
            <a href="https://github.com/RajonAyon/BIkroy_Price_Intelligence" 
            style="color: white; text-decoration: underline;">
                View Source Code & Documentation
            </a>
        </div>
        <div style="font-size: 0.85em; margin-top: 8px; opacity: 0.9;">
            üí° Scraper runs locally (Windows Task Scheduler) ‚Üí Database grows to 50K+ samples ‚Üí 
            Updates deployed weekly
        </div>
    </div>

    <div class="container">
        <header>
            <h1>üì± Phone Price Intelligence</h1>
            <p>Find the best deals on phones in Bangladesh</p>
        </header>


            <!-- Price Alert Button (Top Right) -->
    <div style="position: fixed; top: 20px; right: 20px; z-index: 1000;">
        <button id="alertBtn" class="alert-notification-btn">
            üîî <span id="alertBadge" class="alert-badge" style="display:none;">0</span>
        </button>
    </div>

    <!-- Alert Modal (Hidden by default) -->
    <div id="alertModal" class="modal" style="display:none;">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            
            <div id="alertTabs" class="alert-tabs">
                <button class="alert-tab active" data-tab="create">Create Alert</button>
                <button class="alert-tab" data-tab="manage">My Alerts (<span id="alertCount">0</span>)</button>
            </div>
            
            <!-- CREATE ALERT TAB -->
            <div id="createAlertTab" class="alert-tab-content active">
                <h2>üîî Set Price Alert</h2>
                <p style="color:#666; margin-bottom:20px;">Get notified when deals match your criteria</p>
                
                <form id="alertForm">
                    <div class="form-group">
                        <label>Email *</label>
                        <input type="email" id="alertEmail" required placeholder="your@email.com">
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>Brand *</label>
                            <select id="alertBrand" required>
                                <option value="">Select Brand</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label>Model *</label>
                            <select id="alertModel" required disabled>
                                <option value="">First select brand</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Maximum Price (‡ß≥) *</label>
                        <input type="number" id="alertPrice" required placeholder="e.g. 25000">
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>Condition</label>
                            <select id="alertCondition">
                                <option value="Any">Any</option>
                                <option value="New">New</option>
                                <option value="Used">Used</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label>Location</label>
                            <select id="alertLocation">
                                <option value="Any">Any</option>
                                <option value="Dhaka">Dhaka</option>
                                <option value="Chittagong">Chittagong</option>
                                <option value="Sylhet">Sylhet</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>Min RAM</label>
                            <select id="alertRam">
                                <option value="Any">Any</option>
                                <option value="4GB">4GB+</option>
                                <option value="6GB">6GB+</option>
                                <option value="8GB">8GB+</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label>Min Storage</label>
                            <select id="alertStorage">
                                <option value="Any">Any</option>
                                <option value="64GB">64GB+</option>
                                <option value="128GB">128GB+</option>
                                <option value="256GB">256GB+</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label style="display: flex; align-items: center; gap: 10px;">
                            <input type="checkbox" id="alertWarranty">
                            <span>Must have warranty</span>
                        </label>
                    </div>
                    
                    <button type="submit" class="submit-alert-btn">
                        Create Alert üîî
                    </button>
                </form>
            </div>
            
            <!-- MANAGE ALERTS TAB -->
            <div id="manageAlertsTab" class="alert-tab-content">
                <h2>üìã My Active Alerts</h2>
                
                <div class="manage-alerts-input">
                    <input type="email" id="manageEmail" placeholder="Enter your email to view alerts">
                    <button id="loadAlertsBtn">Load My Alerts</button>
                </div>
                
                <div id="alertsList"></div>
            </div>
        </div>
    </div>




        <div class="tabs">
            <button class="tab active" data-tab="price-intelligence">
                üéØ Price Intelligence Tool
            </button>
            <button class="tab" data-tab="phone-comparison">
                ‚öñÔ∏è Smart Phone Comparison
            </button>
            <button class="tab" data-tab="price-estimator">
                üîÆ Price Estimator
            </button>
        </div>

        <div class="content">
            <div id="price-intelligence" class="tab-content active">
                <div class="search-section">
                    <h2>Check Fair Market Price</h2>
                    <p>Enter any phone model to see if you're getting a good deal</p>
                    
                    <div class="filter-section">
                        <div class="filter-group">
                            <label>Select Brand:</label>
                            <select id="brandSelect" class="filter-select">
                                <option value="">Loading brands...</option>
                            </select>
                        </div>
                        
                        <div class="filter-group">
                            <label>Select Model:</label>
                            <select id="modelSelect" class="filter-select" disabled>
                                <option value="">First select a brand</option>
                            </select>
                        </div>
                        
                        <button class="search-btn" id="searchBtn">
                            Search
                        </button>
                    </div>
                </div>

                <div class="results-section" id="resultsSection">
                    <!-- Results will be populated by JavaScript -->
                </div>

                <div class="empty-state" id="emptyState">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="2" y="3" width="20" height="14" rx="2"/>
                        <path d="M8 21h8"/>
                        <path d="M12 17v4"/>
                    </svg>
                    <h3>Start Your Search</h3>
                    <p>Enter a phone model above to check its market price</p>
                </div>
            </div>

            <div id="phone-comparison" class="tab-content">
                <div class="comparison-section">
                    <h2>Compare Two Phones</h2>
                    <p>Select two phone models to see detailed side-by-side comparison</p>
                    
                    <div class="comparison-selectors">
                        <!-- Phone 1 -->
                        <div class="phone-selector">
                            <h3>Phone 1</h3>
                            <select id="compareBrand1" class="filter-select">
                                <option value="">Select Brand</option>
                            </select>
                            <select id="compareModel1" class="filter-select" disabled>
                                <option value="">Select Model</option>
                            </select>
                        </div>
                        
                        <!-- VS Badge -->
                        <div class="vs-badge">VS</div>
                        
                        <!-- Phone 2 -->
                        <div class="phone-selector">
                            <h3>Phone 2</h3>
                            <select id="compareBrand2" class="filter-select">
                                <option value="">Select Brand</option>
                            </select>
                            <select id="compareModel2" class="filter-select" disabled>
                                <option value="">Select Model</option>
                            </select>
                        </div>
                    </div>
                    
                    <button class="search-btn" id="compareBtn">Compare Phones</button>
                    
                    <div id="comparisonResults" class="comparison-results"></div>
                </div>
            </div>

            <div id="price-estimator" class="tab-content">
                <div class="estimator-section">
                    <h2>üîÆ AI Price Estimator</h2>
                    <p>Enter phone details to get instant price prediction</p>
                    
                    <form id="estimatorForm" class="estimator-form">
                        <!-- Brand & Model Row -->
                        <div class="form-row">
                            <div class="form-group">
                                <label>Brand *</label>
                                <select id="estBrand" required>
                                    <option value="">Select Brand</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label>Model *</label>
                                <select id="estModel" required disabled>
                                    <option value="">First select brand</option>
                                </select>
                            </div>
                        </div>
                        
                        <!-- RAM & Storage Row -->
                        <div class="form-row">
                            <div class="form-group">
                                <label>RAM (GB) *</label>
                                <select id="estRAM" required>
                                    <option value="">Select RAM</option>
                                    <option value="4">4 GB</option>
                                    <option value="6">6 GB</option>
                                    <option value="8">8 GB</option>
                                    <option value="12">12 GB</option>
                                    <option value="16">16 GB</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label>Storage (GB) *</label>
                                <select id="estStorage" required>
                                    <option value="">Select Storage</option>
                                    <option value="64">64 GB</option>
                                    <option value="128">128 GB</option>
                                    <option value="256">256 GB</option>
                                    <option value="512">512 GB</option>
                                    <option value="1024">1 TB</option>
                                </select>
                            </div>
                        </div>
                        
                        <!-- Condition & Network Row -->
                        <div class="form-row">
                            <div class="form-group">
                                <label>Condition *</label>
                                <select id="estCondition" required>
                                    <option value="">Select</option>
                                    <option value="New">New</option>
                                    <option value="Used">Used</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label>Network *</label>
                                <select id="estNetwork" required>
                                    <option value="">Select</option>
                                    <option value="4G">4G</option>
                                    <option value="5G">5G</option>
                                </select>
                            </div>
                        </div>
                        
                        <!-- Division & Location Row -->
                        <div class="form-row">
                            <div class="form-group">
                                <label>Division *</label>
                                <select id="estDivision" required>
                                    <option value="">Select Division</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label>Location *</label>
                                <select id="estLocation" required disabled>
                                    <option value="">First select division</option>
                                </select>
                            </div>
                        </div>
                        
                        <!-- Battery & Camera Type Row -->
                        <div class="form-row">
                            <div class="form-group">
                                <label>Battery (mAh)</label>
                                <select id="estBattery">
                                    <option value="">Auto-detect</option>
                                    <option value="4000">4000 mAh</option>
                                    <option value="4500">4500 mAh</option>
                                    <option value="5000">5000 mAh</option>
                                    <option value="5500">5500 mAh</option>
                                    <option value="6000">6000 mAh</option>
                                    <option value="6500">6500 mAh</option>
                                    <option value="7000">7000 mAh</option>
                                    <option value="7500">7500 mAh</option>
                                    <option value="8000">8000 mAh</option>
                                    <option value="8500">8500 mAh</option>
                                    <option value="9000">9000 mAh</option>
                                    <option value="9500">9500 mAh</option>
                                    <option value="10000">10000 mAh</option>

                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label>Camera Type</label>
                                <select id="estCameraType">
                                    <option value="">Auto-detect</option>
                                    <option value="Single">Single</option>
                                    <option value="Dual">Dual</option>
                                    <option value="Triple">Triple</option>
                                    <option value="Quad">Quad</option>
                                </select>
                            </div>
                        </div>
                        
                        <!-- Camera Pixel -->
                        <div class="form-group">
                            <label>Main Camera (MP)</label>
                            <select id="estCameraPixel">
                                <option value="">Auto-detect</option>
                            </select>
                        </div>
                        
                        <!-- Warranty & Store Checkboxes -->
                        <div class="form-row">
                            <div class="form-group">
                                <label style="display: flex; align-items: center; gap: 10px;">
                                    <input type="checkbox" id="estWarranty">
                                    <span>Has Warranty</span>
                                </label>
                            </div>
                            
                            <div class="form-group">
                                <label style="display: flex; align-items: center; gap: 10px;">
                                    <input type="checkbox" id="estStore">
                                    <span>Store Seller</span>
                                </label>
                            </div>
                        </div>
                        
                        <button type="submit" class="estimate-btn">
                            üîÆ Estimate Price
                        </button>
                    </form>
                    
                    <!-- Results -->
                    <div id="estimatorResults" style="display:none;"></div>
                </div>
            </div>

            </div>
        </div>
    </div>
    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>
